{% extends 'clapperboardApp/base.html' %}
{% load static %}
{% load crispy_forms_tags %}


{% block tituloPagina %}
Películas- CLAPPERBOARD
{% endblock %}

{% block contenidoPagina %}

<header class="d-flex masthead" style="background-image: url( '/media/peliculas/banner.png')"></header>

<section class="bg-light py-5">
    <div class="conteiner px-5">
        <div class="row gx-5 justify-content-center">
            <div class="col-lg-12">
                <form class="d-flex my-2 my-lg-0" action="" method="post">
                    {% csrf_token %}
                    <input class="flex-grow-0 form-control mr-sm-2" type="search" name="buscar" placeholder="Buscar" aria-label="Search">
                    <button class="btn btn-outline-danger text-nowrap ms-3 my-2 my-sm-0" type="submit"> <i class="bi bi-search"></i> Buscar</button>
                {% if user.is_authenticated %}
                    {% if user.is_superuser %}
                        <a class="btn btn-outline-danger text-nowrap ms-3 my-2 my-sm-0" href=" {% url 'nueva_pelicula' %} "> <i class="bi bi-plus-lg"></i> Crear Película</a>
                    {% endif %}
                {% endif %}
                </form>               
            </div>
        </div>
        <br>
        <h4>
            {% if buscar %}
            Resultado para "{{ busqueda }}":
            {% endif %}
        </h4>
    </div>
</section>
<div class="row gx-5 justify-content-center">
    <div class="col-lg-10 table-responsive">
        <table class="table table-theme table-striped">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Película</th>
                    <th scope="col">Información</th>
                    <th scope="col">imagen</th>
                    <th scope="col">Fecha</th>
                    {% if user.is_authenticated %}
                        {% if user.is_superuser %}
                            <th scope="col">Acciones</th>
                        {% endif %}
                    {% endif %}
                </tr>
            </thead>
            <tbody>  
                {% for x in pelicula %}
                    <tr>
                        <th scope="row">{{forloop.counter}}</th>
                        <td>{{x.titulo}}</td>
                        <td>{{x.descripcion}}</td>
                        <td>
                            <img src="{% static 'clapperboardApp/media/peliculas/' ~ x.imagen %}"  height="100px" width="100px">
                        <td>{{x.fecha_publicacion}}</td>
                        <td>
                            {% if user.is_authenticated %}
                                {% if user.is_superuser %}
                                    <a href="{% url 'editar_pelicula' x.id %}" class="text-primary badge badge-primary text-decoration-none"> <i class="bi bi-pencil-square"></i> Editar</a>
                                    <a href="{% url 'eliminar_pelicula' x.id %}" class="text-danger badge badge-danger text-decoration-none"> <i class="bi bi-x-square"></i> Eliminar</a>
                                {% endif %}
                            {% endif %}
                            
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


 


{% endblock %}


